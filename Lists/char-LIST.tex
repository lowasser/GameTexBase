%%%%%
%%
%% This file sets up the Char, PC, NPC, and Name datatypes and creates
%% macros for each.  These are for characters in the game.  Here you
%% use the fields in Char to assign elements to each character.
%%
%%
%%
%% \MYname (and the player name) is parsed by \parsename, the command
%% provided by LaTeX/parsename.sty.  See that file and
%% Extras/README-namemappings for ways to take advantage of this.
%%
%% \badgetrue and \badgefalse toggle whether or not a Char macro will
%% produce a namebadge.
%%
%% \statstrue and \statsfalse will toggle the statcard.
%%
%% \skillstrue and \skillsfalse will toggle the skill list.  The skill
%% list prints both skills and stats (even if \statsfalse is set).
%%
%% \sheettrue and \sheetfalse will toggle the character sheet.
%%
%% \listtrue and \listfalse toggle whether the Char macro can display
%% in the playerlist.
%%
%% \labeltrue and \labelfalse toggle the box label.
%%
%%
%%
%% Some of the Char datatype's setup is in LaTeX/gametex.sty, to keep
%% this file short.
%%
%%%%%

%%%%%
%% Gender
%%
%% The term 'gender' specifically in GameTeX is used to refer to the
%% pronoun and gendered language used to actually refer to a character.
%% To add a new neopronoun, add a new element to this list
%% with the appropriate next number.

\newcommand{\defaultgender}{
	% Non-gender-specific or nonbinary nouns.
	\def\spouse{spouse}
	\def\Spouse{Spouse}
	\def\offspring{offspring}
	\def\Offspring{Offspring}
	\def\child{child}
	\def\Child{Child}
	\def\sibling{sibling}
	\def\Sibling{Sibling}
	\def\sib{sib}
	\def\Sib{Sib}
	\def\parent{parent}
	\def\Parent{Parent}
	\def\grandparent{grand\parent}
	\def\Grandparent{Grand\parent}
	\def\auncle{auncle}
	\def\Auncle{Auncle}
	\def\nibling{nibling}
	\def\Nibling{Nibling}
	\def\grandchild{grandchild}
	\def\Grandchild{Grandchild}
	\def\partner{partner}
	\def\betrothed{betrothed}
	\def\Heir{Heir}
	\def\heir{heir}
	\def\monarch{monarch}
	\def\Monarch{Monarch}
	\def\Emperor{Emperor}
	\def\emperor{emperor}
	\def\Duke{Duke}
	\def\Count{Count}
	\def\Baron{Baron}
	\def\cleric{cleric}
	\def\Cleric{Cleric}
	\def\stray{stray}
	\def\Stray{Stray}
	\def\pal{pal}
	\def\person{person}
	\def\deity{deity}
	\def\Deity{Deity}
}

\newcommand{\genderpronouns}[3]{
	\newcommand{#1}[1][]{
		\defaultgender
		\ifx#1\empty
			\s\MYcharpronouns{#2}
		\else
			\rs\MYcharpronouns{#2} 
		\fi
		#3
	}
}

%% \genderpronounsmod{\newgendercommand}{new pronouns description}{\oldgendercommand \def\thingToOverride{...}}
%% example:
%% \genderpronounsmod{\hethey}{he/they}{\hehim}
\newcommand{\genderpronounsmod}[3]{
	\genderpronouns{#1}{#2}{
		#3
		\rs\MYcharpronouns{#2}
	}
}

\def\do{do\verbes}

\newcommand{\pluralgenderpronouns}[3]{
	\genderpronouns{#1}{#2}{
		\def\verbs{}
		\def\verby{y}
		\def\verbes{}
		\def\are{are}
		\def\re{'re}
		\def\were{were}
		\def\have{have}
		#3
	}
}

\newcommand{\singulargenderpronouns}[3]{
	\genderpronouns{#1}{#2}{
		\def\verbs{s}
		\def\verby{ies}
		\def\verbes{es}
		\def\are{is}
		\def\re{'s}
		\def\were{was}
		\def\have{has}
		#3
	}
}

%% Base, 'unmixed' pronoun sets.

\singulargenderpronouns{\hehim}{he/him}{
	\def\they{he}
	\def\They{He}
	\def\them{him}
	\def\Them{Him}
	\def\their{his}
	\def\Their{His}
	\def\theirs{his}
	\def\themself{himself}
	\def\Themself{Himself}
	\def\spouse{husband}
	\def\Spouse{Husband}
	\def\offspring{son}
	\def\Offspring{Son}
	\def\child{boy}
	\def\Child{Boy}
	\def\sibling{brother}
	\def\Sibling{Brother}
	\def\sib{bro}
	\def\Sib{Bro}
	\def\parent{father}
	\def\Parent{Father}
	\def\auncle{uncle}
	\def\Auncle{Uncle}
	\def\nibling{nephew}
	\def\Nibling{Nephew}
	\def\grandchild{grandson}
	\def\Grandchild{Grandson}
	\def\partner{boyfriend}
	\def\betrothed{fianc\'e}
	\def\Heir{Prince}
	\def\heir{prince}
	\def\monarch{king}
	\def\Monarch{King}
	\def\cleric{priest}
	\def\Cleric{Priest}
	\def\stray{urchin}
	\def\Stray{Urchin}
	\def\pal{guy}
	\def\person{man}
	\def\deity{god}
	\def\Deity{God}
}

\singulargenderpronouns{\sheher}{she/her}{
	\def\they{she}
	\def\They{She}
	\def\them{her}
	\def\Them{Her}
	\def\their{her}
	\def\Their{Her}
	\def\theirs{hers}
	\def\themself{herself}
	\def\Themself{Herself}
	\def\spouse{wife}
	\def\Spouse{Wife}
	\def\offspring{daughter}
	\def\child{girl}
	\def\Child{Girl}
	\def\sibling{sister}
	\def\Sibling{Sister}
	\def\sib{sis}
	\def\Sib{Sis}
	\def\parent{mother}
	\def\Parent{Mother}
	\def\auncle{aunt}
	\def\Auncle{Aunt}
	\def\nibling{niece}
	\def\Nibling{Niece}
	\def\grandchild{granddaughter}
	\def\Grandchild{Granddaughter}
	\def\partner{girlfriend}
	\def\betrothed{fianc\'ee}
	\def\Heir{Princess}
	\def\heir{princess}
	\def\monarch{queen}
	\def\Monarch{Queen}
	\def\cleric{priestess}
	\def\Cleric{Priestess}
	\def\stray{waif}
	\def\Stray{Waif}
	\def\pal{gal}
	\def\person{woman}
	\def\deity{goddess}
	\def\Deity{Goddess}
}

\pluralgenderpronouns{\theythem}{they/them}{
	\def\they{they}
	\def\They{They}
	\def\them{them}
	\def\Them{Them}
	\def\their{their}
	\def\Their{Their}
	\def\theirs{theirs}
	\def\themself{themself}
	\def\Themself{Themself}
}

\singulargenderpronouns{\zezir}{ze/zir}{
	\def\they{ze}
	\def\They{Ze}
	\def\them{zir}
	\def\Them{Zir}
	\def\their{zir}
	\def\Their{Zir}
	\def\theirs{zirs}
	\def\themself{zirself}
	\def\Themself{zirself}
}

\singulargenderpronouns{\itits}{it/its}{
	\def\they{it}
	\def\They{It}
	\def\them{it}
	\def\Them{It}
	\def\their{its}
	\def\Their{Its}
	\def\theirs{its}
	\def\themself{itself}
	\def\Themself{itself}
}

\pluralgenderpronouns{\eyem}{ey/em}{
	\def\they{ey}
	\def\They{Ey}
	\def\them{em}
	\def\Them{Em}
	\def\their{eir}
	\def\Their{Eir}
	\def\theirs{eirs}
	\def\themself{emself}
	\def\Themself{Emself}
}

\singulargenderpronouns{\avoidpronouns}{avoid pronouns}{
	\def\they{\usual}
	\def\They{\usual}
	\def\them{\usual}
	\def\Them{\usual}
	\def\their{\usual's}
	\def\Their{\usual's}
	\def\theirs{\usual's}
	\def\themself{themself}
	\def\Themself{Themself}
}

\pluralgenderpronouns{\faefaer}{fae/faer}{
	\def\they{fae}
	\def\They{Fae}
	\def\them{fae}
	\def\Them{Fae}
	\def\their{faer}
	\def\Their{Faer}
	\def\theirs{faers}
	\def\themself{faeself}
	\def\Themself{Faeself}
}

%% Mixed pronoun sets.
%% We don't try to cover all or even most of the combinations;
%% it's very easy to add the ones you need.

\genderpronounsmod{\hethey}{he/they}{\hehim}
\genderpronounsmod{\shethey}{she/they}{\sheher}
\genderpronounsmod{\theyhe}{they/he}{\theythem}
\genderpronounsmod{\theyshe}{they/she}{\theythem}
\genderpronounsmod{\genderfluid}{genderfluid}{\theythem}
\genderpronounsmod{\anypronouns}{any pronouns}{\theythem}

% Example of a tricksy variant:
%
% \genderpronounsmod{\hebutnotaman}{he/him}{
%   \hehim
%   \def\person{person}
% }

%%%%%
%% If a field is declared by \F, it must be given a value by \s inside
%% \NEW, even if it's blank.  If you want it to be optional, declare
%% it with \FD<field> {<default>} here.
%%
%%%% Character stats
%% Use \newstat to create stats (below, in \PRESETS{Char}).  The
%% <default> value is used unless the given Char macro sets the field.
%% For example:
%%
%%   \newstat\MYhp	{Hit Points}{HP}{5}
%%
%% would give character a Hit Points stat, abbreviated HP, referenced
%% as the \MYhp field, that defaults to 5.
\PRESETS{Char}{
	\FD\MYdesc	{}   %% badge description
  \F\MYgender	{}	 %% must be set by a command like \hehim etc.
	\FD\MYcharpronouns{}   %% must be set by a command like \hehim etc.
	\FD\MYplayerpronouns{}   %% DO NOT use \theythem, write ``they/them'' or whatever
	\FD\MYrole	{} %% playerlist role
  \FD\MYgroupstr{} %% playerlist groupstring
  \FD\MYfile	{} %% character sheet filename (including .tex)
  \FS\MYtext	{\ifx\MYfile\empty\else%
		  \getextractenvs{document}{\chars/\MYfile}%
		\fi}
		
	%\newstat\MYhp	{Hit Points}{HP}{5}
  \badgetrue\statstrue\skillstrue\sheettrue\listtrue\labeltrue
  }

\POSTSETS{Char}{
  \resolvestats
  }
	
%%%%% Defines pronounful contact and intro mappings.
\intromap{\optionalparen{\full}{\MYcharpronouns}}
\contactmap{\optionalparen{\full}{\MYcharpronouns}}

%%%%%
%% PC is a subtype of Char, for regular PCs.
\DECLARESUBTYPE{PC}{Char}
\PRESETS{PC}{\sd\MYgroupstr{pc}}


%%%%%
%% NPC is a subtype of Char.
\DECLARESUBTYPE{NPC}{Char}
\PRESETS{NPC}{\badgefalse\sd\MYgroupstr{npc}}


%%%%%
%% Name is a subtype of NPC.
%% For an in-text name.  By default, produces no packet material.
\DECLARESUBTYPE{Name}{Char}
\PRESETS{Name}{
  \badgefalse\statsfalse\skillsfalse\sheetfalse\listfalse\labelfalse
  \sd\MYgroupstr{name}
  }


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% \cTest demonstrates all the possible options for a character, but
%% you may not even need all of these for every game, so feel free
%% to skip any options you don't need.
%%
%%   \NEW{PC}{\cBlah}{
%%     \s\MYname	{}
%%     \s\MYfile	{}
%%     }
%%
%\NEW{PC}{\cTest}{
%  \s\MYname	{Test Character}
%  \s\MYfile	{MyCharSheet.tex}		% a file in the Charsheets directory
%  \s\MYnumber	{00000}						% badge number
%  \s\MYdesc	{a test}						% a few words of description that can fit
%																	% visibly on a badge
%  \s\MYplayer	{Test Player}			% player name
%  \hethey												% configures pronouns
%  \s\MYblues	{\bTest{}}					% assigned bluesheets
%  \s\MYgreens	{\gTest{}\nGreenTest{}}			% assigned greensheets
%  \s\MYabils	{\aTest{}						% assigned abilities -- demonstrates you can split lines in these lists
%		\aTestCombat{}
%		}
%  \s\MYitems	{\multi{5}{\iTest{}}\nTest{}}	% assigned items, including notebooks
%  \s\MYwhites	{\wTest{}}				% assigned whitesheets
%  % \s\MYcr{2}										% if you create stats in your game, this is how you set them for each character
%  }

%%%%%%%%%%%%% The PCs %%%%%%%%%%%%%%%

\NEW{PC}{\cTest}{
  \s\MYname	{John Doe}
	\s\MYfile {README.tex} % to fill in with a file name from the Charsheets directory
  \s\MYdesc	{a nondescript person}  % short description to fit on a badge
  \hethey												% configures pronouns
	\s\MYnumber{1234}
	\s\MYplayer {Coolest Roleplayer}
	\s\MYplayerpronouns{they/them}
	\s\MYblues {\bTest{}}
	\s\MYgreens {\gTest{}}
	\s\MYwhites {}
	\s\MYmems {\mTest{}}
	\s\MYabils {\aTest{}}
	\s\MYitems {}
}

%%%%%%%%%%%%% The NPCs %%%%%%%%%%%%%%%

\NEW{NPC}{\cTestNPC}{
	\s\MYname {Chef \pre Someone}
	\theythem
}
\NEW{NPC}{\cSomeGuy}{
	\s\MYname {Mr.\pre Someone Dude}
	\hehim
}